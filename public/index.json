[{"content":"PENDING \u0026hellip; ORIGINAL POST ↓ I find this useful as a less memory intensive Drupal-friendly way to backtrace PHP as a one-off code snippet to temporarily drop into a troublesome location without installing modules or server-side tools:\n1 2 3 4 5 6 $trace = debug_backtrace(); $backtrace_lite = array(); foreach( $trace as $call ) { $backtrace_lite[] = $call[\u0026#39;function\u0026#39;].\u0026#34; \u0026#34;.$call[\u0026#39;file\u0026#39;].\u0026#34; line \u0026#34;.$call[\u0026#39;line\u0026#39;]; } debug( $backtrace_lite, \u0026#34;TRACE\u0026#34;, true ); It gets the backtrace into Drupal\u0026rsquo;s debugging system, but strips it down to the essentials to avoid failures when massive objects are involved. For handy reference, the other keys within each row of the debug_backtrace() object are: class, object, type, args.\nReference Drupal Answers - 1 Drupal Answers - 2 PHP Documentation - debug_backtrace Example Screenshot ","permalink":"https://blog.simon-hu.org/posts/2023.11.16-drupal-debug-bracktrace/","summary":"PENDING \u0026hellip; ORIGINAL POST ↓ I find this useful as a less memory intensive Drupal-friendly way to backtrace PHP as a one-off code snippet to temporarily drop into a troublesome location without installing modules or server-side tools:\n1 2 3 4 5 6 $trace = debug_backtrace(); $backtrace_lite = array(); foreach( $trace as $call ) { $backtrace_lite[] = $call[\u0026#39;function\u0026#39;].\u0026#34; \u0026#34;.$call[\u0026#39;file\u0026#39;].\u0026#34; line \u0026#34;.$call[\u0026#39;line\u0026#39;]; } debug( $backtrace_lite, \u0026#34;TRACE\u0026#34;, true ); It gets the backtrace into Drupal\u0026rsquo;s debugging system, but strips it down to the essentials to avoid failures when massive objects are involved.","title":"Drupal Debug Trick: debug_backtrace / debug_print_backtrace"},{"content":"Version-1 1 2 3 4 5 6 7 8 9 10 11 12 settings=$( echo \u0026#34;sites/default/settings.php\u0026#34; ); database=$( cat \u0026#34;${settings}\u0026#34; | grep \u0026#34;\u0026#39;database\u0026#39; =\u0026gt;\u0026#34; | grep -v \u0026#34;*\u0026#34; | grep -v \u0026#34;#\u0026#34; | sed -n \u0026#34;s/\u0026#39;database\u0026#39; =\u0026gt; \u0026#39;\\([^\u0026#39;]*\\)\u0026#39;.*/\\1/p\u0026#34; | sed -e \u0026#39;s/^[[:space:]]*//\u0026#39;) ; username=$( cat \u0026#34;${settings}\u0026#34; | grep \u0026#34;\u0026#39;username\u0026#39; =\u0026gt;\u0026#34; | grep -v \u0026#34;*\u0026#34; | grep -v \u0026#34;#\u0026#34; | sed -n \u0026#34;s/\u0026#39;username\u0026#39; =\u0026gt; \u0026#39;\\([^\u0026#39;]*\\)\u0026#39;.*/\\1/p\u0026#34; | sed -e \u0026#39;s/^[[:space:]]*//\u0026#39;) ; password=$( cat \u0026#34;${settings}\u0026#34; | grep \u0026#34;\u0026#39;password\u0026#39; =\u0026gt;\u0026#34; | grep -v \u0026#34;*\u0026#34; | grep -v \u0026#34;#\u0026#34; | sed -n \u0026#34;s/\u0026#39;password\u0026#39; =\u0026gt; \u0026#39;\\([^\u0026#39;]*\\)\u0026#39;.*/\\1/p\u0026#34; | sed -e \u0026#39;s/^[[:space:]]*//\u0026#39;) ; echo -en \u0026#34;\\n\u0026#34; \u0026amp;\u0026amp; \\ echo -en \u0026#34;\\n\u0026#34; \u0026amp;\u0026amp; \\ echo -en \u0026#34;\\n \\e[1;31m Settings: [\\e[1;33m${settings}\\e[1;31m] \\e[0m\u0026#34; \u0026amp;\u0026amp; \\ echo -en \u0026#34;\\n \\e[1;31m Database: [\\e[1;33m${database}\\e[1;31m] \\e[0m\u0026#34; \u0026amp;\u0026amp; \\ echo -en \u0026#34;\\n \\e[1;31m Username: [\\e[1;33m${username}\\e[1;31m] \\e[0m\u0026#34; \u0026amp;\u0026amp; \\ echo -en \u0026#34;\\n \\e[1;31m Password: [\\e[1;33m${password}\\e[1;31m] \\e[0m\u0026#34; \u0026amp;\u0026amp; \\ echo -en \u0026#34;\\n\u0026#34; \u0026amp;\u0026amp; \\ echo -en \u0026#34;\\n\u0026#34;; Example output:\n1 2 3 4 5 6 7 8 9 run_script.... . Settings: [sites/default/settings.php] Database: [xxxx_d10] Username: [root] Password: [root] . ","permalink":"https://blog.simon-hu.org/posts/2023.11.15-cpanel-drupal-settings.php/","summary":"Version-1 1 2 3 4 5 6 7 8 9 10 11 12 settings=$( echo \u0026#34;sites/default/settings.php\u0026#34; ); database=$( cat \u0026#34;${settings}\u0026#34; | grep \u0026#34;\u0026#39;database\u0026#39; =\u0026gt;\u0026#34; | grep -v \u0026#34;*\u0026#34; | grep -v \u0026#34;#\u0026#34; | sed -n \u0026#34;s/\u0026#39;database\u0026#39; =\u0026gt; \u0026#39;\\([^\u0026#39;]*\\)\u0026#39;.*/\\1/p\u0026#34; | sed -e \u0026#39;s/^[[:space:]]*//\u0026#39;) ; username=$( cat \u0026#34;${settings}\u0026#34; | grep \u0026#34;\u0026#39;username\u0026#39; =\u0026gt;\u0026#34; | grep -v \u0026#34;*\u0026#34; | grep -v \u0026#34;#\u0026#34; | sed -n \u0026#34;s/\u0026#39;username\u0026#39; =\u0026gt; \u0026#39;\\([^\u0026#39;]*\\)\u0026#39;.*/\\1/p\u0026#34; | sed -e \u0026#39;s/^[[:space:]]*//\u0026#39;) ; password=$( cat \u0026#34;${settings}\u0026#34; | grep \u0026#34;\u0026#39;password\u0026#39; =\u0026gt;\u0026#34; | grep -v \u0026#34;*\u0026#34; | grep -v \u0026#34;#\u0026#34; | sed -n \u0026#34;s/\u0026#39;password\u0026#39; =\u0026gt; \u0026#39;\\([^\u0026#39;]*\\)\u0026#39;.","title":"Drupal CLI - reading database configuration (at CPanel)"},{"content":"Error Message 1 Drupal\\Component\\Plugin\\Exception\\ContextException: The \u0026#39;entity:user\u0026#39; context is required and not present. in Drupal\\Core\\Plugin\\Context\\Context-\u0026gt;getContextValue() (line 73 of core/lib/Drupal/Core/Plugin/Context/Context.php). Working Solution for Me File: public_html/core/lib/Drupal/Core/ParamConverter/EntityConverter.php b/core/lib/Drupal/Core/ParamConverter/EntityConverter.php\n1 2 3 4 5 6 7 8 9 - if (isset($contexts[$context_id])) { - $account = $contexts[$context_id]-\u0026gt;getContextValue(); - unset($account-\u0026gt;_skipProtectedUserFieldConstraint); - unset($contexts[$context_id]); - } + if (isset($contexts[$context_id]) \u0026amp;\u0026amp; $contexts[$context_id]-\u0026gt;hasContextValue()) { + $account = $contexts[$context_id]-\u0026gt;getContextValue(); + unset($account-\u0026gt;_skipProtectedUserFieldConstraint, $contexts[$context_id]); + } Reference\nhttps://www.drupal.org/project/drupal/issues/3056234 https://www.drupal.org/files/issues/2023-09-08/3056234-44.patch Community Solution 1 File: public_html/core/lib/Drupal/Core/ParamConverter/EntityConverter.php b/core/lib/Drupal/Core/ParamConverter/EntityConverter.php\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 diff --git a/core/lib/Drupal/Core/ParamConverter/EntityConverter.php b/core/lib/Drupal/Core/ParamConverter/EntityConverter.php index aa2b00d647..7f87d1c9c8 100644 --- a/core/lib/Drupal/Core/ParamConverter/EntityConverter.php +++ b/core/lib/Drupal/Core/ParamConverter/EntityConverter.php @@ -145,10 +145,9 @@ public function convert($value, $definition, $name, array $defaults) { // triggering some test failures. We can remove these lines once // https://www.drupal.org/node/2934192 is fixed. $context_id = \u0026#39;@user.current_user_context:current_user\u0026#39;; - if (isset($contexts[$context_id])) { + if (isset($contexts[$context_id]) \u0026amp;\u0026amp; $contexts[$context_id]-\u0026gt;hasContextValue()) { $account = $contexts[$context_id]-\u0026gt;getContextValue(); - unset($account-\u0026gt;_skipProtectedUserFieldConstraint); - unset($contexts[$context_id]); + unset($account-\u0026gt;_skipProtectedUserFieldConstraint, $contexts[$context_id]); } $entity = $this-\u0026gt;entityRepository-\u0026gt;getCanonical($entity_type_id, $value, $contexts); diff --git a/core/tests/Drupal/KernelTests/Core/Entity/EntityUrlTest.php b/core/tests/Drupal/KernelTests/Core/Entity/EntityUrlTest.php new file mode 100644 index 0000000000..70ab99719c --- /dev/null +++ b/core/tests/Drupal/KernelTests/Core/Entity/EntityUrlTest.php @@ -0,0 +1,27 @@ +\u0026lt;?php + +namespace Drupal\\KernelTests\\Core\\Entity; + +use Drupal\\Core\\Url; +use Drupal\\entity_test\\Entity\\EntityTest; + +/** + * Tests URL method. + * + * @group Entity + */ +class EntityUrlTest extends EntityKernelTestBase { + + public function testUrl() { + $this-\u0026gt;installEntitySchema(\u0026#39;entity_test\u0026#39;); + $this-\u0026gt;installEntitySchema(\u0026#39;user\u0026#39;); + + $entity = EntityTest::create(); + $entity-\u0026gt;save(); + $entityId = $entity-\u0026gt;id(); + $url = Url::fromUri(\u0026#39;internal:/entity_test/\u0026#39; . $entityId); + $this-\u0026gt;assertEquals(\u0026#39;entity.entity_test.canonical\u0026#39;, $url-\u0026gt;getRouteName()); + $this-\u0026gt;assertEquals([\u0026#39;entity_test\u0026#39; =\u0026gt; $entityId], $url-\u0026gt;getRouteParameters()); + } + +} Reference\nhttps://www.drupal.org/project/drupal/issues/3056234 https://www.drupal.org/files/issues/2023-09-08/3056234-44.patch Community Solution 2 File: public_html/core/lib/Drupal/Core/ParamConverter/EntityConverter.php b/core/lib/Drupal/Core/ParamConverter/EntityConverter.php\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 diff --git a/core/lib/Drupal/Core/ParamConverter/EntityConverter.php b/core/lib/Drupal/Core/ParamConverter/EntityConverter.php index c3820baaca..3f69b2b858 100644 --- a/core/lib/Drupal/Core/ParamConverter/EntityConverter.php +++ b/core/lib/Drupal/Core/ParamConverter/EntityConverter.php @@ -2,6 +2,7 @@ namespace Drupal\\Core\\ParamConverter; +use Drupal\\Component\\Plugin\\Exception\\ContextException; use Drupal\\Core\\Entity\\EntityInterface; use Drupal\\Core\\Entity\\EntityRepositoryInterface; use Drupal\\Core\\Entity\\EntityTypeManagerInterface; @@ -146,8 +147,12 @@ public function convert($value, $definition, $name, array $defaults) { // https://www.drupal.org/node/2934192 is fixed. $context_id = \u0026#39;@user.current_user_context:current_user\u0026#39;; if (isset($contexts[$context_id])) { - $account = $contexts[$context_id]-\u0026gt;getContextValue(); - unset($account-\u0026gt;_skipProtectedUserFieldConstraint); + try { + $account = $contexts[$context_id]-\u0026gt;getContextValue(); + unset($account-\u0026gt;_skipProtectedUserFieldConstraint); + } + catch (ContextException $e) { + } unset($contexts[$context_id]); } $entity = $this-\u0026gt;entityRepository-\u0026gt;getCanonical($entity_type_id, $value, $contexts); Reference:\nhttps://www.drupal.org/project/drupal/issues/3357354 https://www.drupal.org/files/issues/2023-06-06/3357354-8.patch ","permalink":"https://blog.simon-hu.org/posts/2023.11.15-the-entityuser-context-is-required-and-not-present/","summary":"Error Message 1 Drupal\\Component\\Plugin\\Exception\\ContextException: The \u0026#39;entity:user\u0026#39; context is required and not present. in Drupal\\Core\\Plugin\\Context\\Context-\u0026gt;getContextValue() (line 73 of core/lib/Drupal/Core/Plugin/Context/Context.php). Working Solution for Me File: public_html/core/lib/Drupal/Core/ParamConverter/EntityConverter.php b/core/lib/Drupal/Core/ParamConverter/EntityConverter.php\n1 2 3 4 5 6 7 8 9 - if (isset($contexts[$context_id])) { - $account = $contexts[$context_id]-\u0026gt;getContextValue(); - unset($account-\u0026gt;_skipProtectedUserFieldConstraint); - unset($contexts[$context_id]); - } + if (isset($contexts[$context_id]) \u0026amp;\u0026amp; $contexts[$context_id]-\u0026gt;hasContextValue()) { + $account = $contexts[$context_id]-\u0026gt;getContextValue(); + unset($account-\u0026gt;_skipProtectedUserFieldConstraint, $contexts[$context_id]); + } Reference\nhttps://www.drupal.org/project/drupal/issues/3056234 https://www.drupal.org/files/issues/2023-09-08/3056234-44.patch Community Solution 1 File: public_html/core/lib/Drupal/Core/ParamConverter/EntityConverter.","title":"The 'entity:user' context is required and not present"},{"content":"PENDING \u0026hellip;. https://gorannikolovski.com/blog/how-to-apply-a-patch-in-drupal\n","permalink":"https://blog.simon-hu.org/posts/2023.11.14-how-to-apply-patch-in-drupal/","summary":"PENDING \u0026hellip;. https://gorannikolovski.com/blog/how-to-apply-a-patch-in-drupal","title":"How to apply patch in drupal ?"},{"content":"Customizing Color Theme Themes from the market Keeping this section for the sake of clean article structure, I will not spend any words on this one, if you have any questions simply refer to Google or the following official documentation:\nReference:\nVS Code Documentation - Color Themes from the Marketplace VS Code Documentation - Selecting the Color Theme VS Code Documentation - Auto Switching based on OS Color Theme Theme Customization in Settings.json The main focus of this section will be explaining how to customize your existing theme (ones you downloaded and installed from the market place), and list some of the most commonly customized components. The official documentation is here for a quick reference purpose: Customizing Color Theme.\nOverall, in order to customize your theme, you will need to use keyword \u0026ldquo;workbench.colorCustomization\u0026rdquo; (for the purpose of changing editor UI element coloring) and \u0026ldquo;editor.tokenColorCustomization\u0026rdquo; (for the purpose of changing syntax highlighting colors) in the user \u0026ldquo;settings.json\u0026rdquo;.\nUI Component To change the \u0026ldquo;UI Element\u0026rdquo; coloring such as the panel color for file exporer, activity bar, notinication, scroll bar, split view, buttons and more, use workbench.colorCustomization; The official documentation of this can be found at: Workbench Colors.\nFor instance, if you would like to change the color of the sidebar and activity bar, and you only want it to apply when you have selected the color theme Ayu Dark, you can do that via adding the following lines in the settings.json:\n1 2 3 4 5 6 7 8 9 10 { ... \u0026#34;workbench.colorCustomizations\u0026#34;: { \u0026#34;[Ayu Dark]\u0026#34;: { \u0026#34;sideBar.background\u0026#34;: \u0026#34;#DEB661\u0026#34;, \u0026#34;activityBar.background\u0026#34;: \u0026#34;#DEB661\u0026#34; }, }, ... } If you would like to get a full list of the element you can manipulate with (or keyword you can use in workbench/colorCustomization, you can checkout the Theme Color Reference.\nSyntax Highlight (token) To change the \u0026ldquo;Syntax Highlighting\u0026rdquo; (or token) coloring such as the color of the comment, the variables and the keywords, use editor.otkenColorCustomization; The offical documentation of this can be found at: Editor syntax highlighting.\nFor instance, if you would like to change the syntax highlighting color for comment and variables in theme Monkai, and change the color of the syntax for keywords in theme Abyss (Red), you can do that via adding the follwing in the settings.json:\n1 2 3 4 5 6 7 8 9 10 11 12 { ... \u0026#34;editor.tokenColorCustomizations\u0026#34;: { \u0026#34;[Monokai]\u0026#34;: { \u0026#34;comments\u0026#34;: \u0026#34;#229977\u0026#34;, \u0026#34;variables\u0026#34;: \u0026#34;#229977\u0026#34;, }, \u0026#34;[Abyss][Red]\u0026#34;: { \u0026#34;keywords\u0026#34;: \u0026#34;#f00\u0026#34;, } ... } If you would like to get a full list of the element you can manipulate with (or keyword you can use in editor.tokenColorCustomization, you can checkout the Syntax Highlight / Token Color Reference.\nExporting Color Theme In case you would like to export your color theme and save it as an extension to populate within your small hack community or extension store, you can do that via the following: TODO: PENDING COMPLETE THIS SECTION !\nReference VS Code Documentation - Create a new Color Theme\n","permalink":"https://blog.simon-hu.org/posts/2023.11.14-vscode-color-theme-customization/","summary":"Customizing Color Theme Themes from the market Keeping this section for the sake of clean article structure, I will not spend any words on this one, if you have any questions simply refer to Google or the following official documentation:\nReference:\nVS Code Documentation - Color Themes from the Marketplace VS Code Documentation - Selecting the Color Theme VS Code Documentation - Auto Switching based on OS Color Theme Theme Customization in Settings.","title":"VS Code Custom Color Theme"},{"content":"Intuition To begin with, I looked for the definition of \u0026ldquo;tag\u0026rdquo; in the Google Tag Manager\u0026rsquo;s context, according to their official documentation, they refer tags as \u0026ldquo;segments of code provided by analytics, marketing, and support vendors to help you integrate their product into your website or mobile apps\u0026rdquo;, so bascially you can think of tag like a chunk of script for third party plug-in (like for example: HotJar (a digital expereience insight and behavior analytics tool))\nSo why would you want to include Google Tag Manager (GTM) to help you control these \u0026ldquo;tag(s)\u0026rdquo;, isn\u0026rsquo;t it easier to just have these \u0026ldquo;tag(s)\u0026rdquo; writting into the .html file ? (or .twig template in the Drupal world); This is of course, because there\u0026rsquo;s benifits from using Google Tag Manager:\nConsolidation: the Google Tag Manager allows a centered single place to control to tags, and have different rule-based triggers that allows fire of different tags on different scenarios (for instance different tags on mobile and desktop) Speed: unlike having all tags in the html documentation, the Goggle Tag Manager will loads multiple tags asynchronously, hence improve page load times **Workflow **: it is earlier to add/modify tags once setup, you wont have to repeat the process of \u0026ldquo;loggin into server → change code → clear cache → wait for client side cache to expire\u0026rdquo;. Further more it allows collaboration between multiple teams, for instance two teams can work on \u0026ldquo;google analytics tags\u0026rdquo; and another working on \u0026ldquo;google ads tags\u0026rdquo; without conflicts. For more details, you can refer to official documentation: Tag Manager Overview\nBasic Setup Let\u0026rsquo;s say there\u0026rsquo;s this scenario where one wanna setup \u0026lt;script type=\u0026quot;application/ld+json\u0026quot;\u0026gt; in a normal HTML file; (The purpose of ﻿\u0026lt;script type=\u0026quot;application/ld+json\u0026quot;\u0026gt; is to embed structured data in JSON format within an HTML page. This data is used to provide additional context and information about the content on the page, helping search engines and other applications better understand and interpret the content. It is commonly used for implementing schema.org markup to enhance search engine optimization and improve the visibility of web pages in search results.)\nFirst, create a GTM account. Second, you will need to following the guide, and add the \u0026lt;script\u0026gt; code provided by GTM: (ScreenShot)\nAdd the following to the \u0026lt;head\u0026gt;of the page (as high of the code as possible)\n1 2 3 4 5 6 7 \u0026lt;!-- Google Tag Manager --\u0026gt; \u0026lt;script\u0026gt;(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({\u0026#39;gtm.start\u0026#39;: new Date().getTime(),event:\u0026#39;gtm.js\u0026#39;});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!=\u0026#39;dataLayer\u0026#39;?\u0026#39;\u0026amp;l=\u0026#39;+l:\u0026#39;\u0026#39;;j.async=true;j.src= \u0026#39;https://www.googletagmanager.com/gtm.js?id=\u0026#39;+i+dl;f.parentNode.insertBefore(j,f); })(window,document,\u0026#39;script\u0026#39;,\u0026#39;dataLayer\u0026#39;,\u0026#39;GTM-W92NBFNR\u0026#39;);\u0026lt;/script\u0026gt; \u0026lt;!-- End Google Tag Manager --\u0026gt; Add the following imeediately after the opening \u0026lt;body\u0026gt; tag\n1 2 3 4 \u0026lt;!-- Google Tag Manager (noscript) --\u0026gt; \u0026lt;noscript\u0026gt;\u0026lt;iframe src=\u0026#34;https://www.googletagmanager.com/ns.html?id=GTM-W92NBFNR\u0026#34; height=\u0026#34;0\u0026#34; width=\u0026#34;0\u0026#34; style=\u0026#34;display:none;visibility:hidden\u0026#34;\u0026gt;\u0026lt;/iframe\u0026gt;\u0026lt;/noscript\u0026gt; \u0026lt;!-- End Google Tag Manager (noscript) --\u0026gt; Test the website using the GTM\u0026rsquo;s built in tool\nThird, proceed to the left bar, choose \u0026ldquo;tag\u0026rdquo; and then \u0026ldquo;create a tag\u0026rdquo;, here we will put \u0026lt;script type=\u0026quot;application/ld+json\u0026quot;\u0026gt; and trigger it on every page (trigger basically means the condition it will get rendered)\nLastly, see it take effect\u0026hellip;\nYou may also test it via https://validator.schema.org/\n","permalink":"https://blog.simon-hu.org/posts/2023.11.14-what-and-why-google-tag-manager/","summary":"Intuition To begin with, I looked for the definition of \u0026ldquo;tag\u0026rdquo; in the Google Tag Manager\u0026rsquo;s context, according to their official documentation, they refer tags as \u0026ldquo;segments of code provided by analytics, marketing, and support vendors to help you integrate their product into your website or mobile apps\u0026rdquo;, so bascially you can think of tag like a chunk of script for third party plug-in (like for example: HotJar (a digital expereience insight and behavior analytics tool))","title":"What/Why Google Tag Manager (GTM)"},{"content":"In this tutorial I will guide you through how to export google analytics data manually on the Google Analytics page\nStep-1: open panel exporting from First, proceed to the page you would like to export. For instance in thise example I want to export the \u0026ldquo;all page\u0026rsquo;s views and performances\u0026rdquo;, (located at \u0026ldquo;behavior \u0026gt; site content \u0026gt; all pages\u0026rdquo;).\nStep-2: narrow down the records Second, you will need to narrow down the number of records you would like to export via selecting a desired \u0026ldquo;date range\u0026rdquo; and \u0026ldquo;row, page\u0026rdquo;. The export will only happen on the data that is currently getting displayed, if you want to export more data, you\u0026rsquo;ll either have to change the date, or the number or rows and pages. Depending on the quantity of your data, you might need to narrow it down for the sake of processing efficiency, otherwise the web application might get stuck.\nStep-3: perform the export(s) Lastly, simply click on the export and select the corresponding export option (here I\u0026rsquo;ll use \u0026ldquo;Google Excel\u0026rdquo;) which will export the data of your desired range (here I am exporting \u0026ldquo;The first 1-1000 record between date: \u0026ldquo;1 Jan 2020 - 1 Nov 2023\u0026rdquo;). In order to export a complete list of all data gathered, you might want to repeat the above procees for multiple times ! (e.g. 1-1000 then 2000-3000, \u0026hellip;, 49000-50000)\nReference\nHow to backup Universal Analytics: Exporting data from Google Analytics and moving to GA4 [UA] Export and share reports ","permalink":"https://blog.simon-hu.org/posts/2023.11.13-export-google-analytics-to-sheets-manual/","summary":"In this tutorial I will guide you through how to export google analytics data manually on the Google Analytics page\nStep-1: open panel exporting from First, proceed to the page you would like to export. For instance in thise example I want to export the \u0026ldquo;all page\u0026rsquo;s views and performances\u0026rdquo;, (located at \u0026ldquo;behavior \u0026gt; site content \u0026gt; all pages\u0026rdquo;).\nStep-2: narrow down the records Second, you will need to narrow down the number of records you would like to export via selecting a desired \u0026ldquo;date range\u0026rdquo; and \u0026ldquo;row, page\u0026rdquo;.","title":"Export Google Analytics to Google Sheets (Manual)"},{"content":"Step-1 : Google Account Logged-in To begin with, make sure you are logged in the proper google account, we will use the same account for all of the Google related product in the upcoming steps, including \u0026ldquo;Google Analytics\u0026rdquo; and \u0026ldquo;Google Sheets\u0026rdquo;.\nStep-2: Install Add-on Secondly, with the same google account open \u0026ldquo;google sheet\u0026rdquo;, then open \u0026ldquo;extension \u0026gt; add-on \u0026gt; get add-on\u0026quot; and install the google analytics add-on as denoted in the screenshot:\nStep-3: Create, Configure, Generate Report Once you have the extension installed, you can proceed to \u0026ldquo;extension \u0026gt; google analytics \u0026gt; create report\u0026rdquo; to create a new report exportation configuration, in this configuration sheet, you can select the parameter for export, the main focus are: \u0026ldquo;start/end date\u0026rdquo;, \u0026ldquo;metrics exporting\u0026rdquo;, \u0026ldquo;dimensions exporting\u0026rdquo;, and \u0026ldquo;limit\u0026rdquo; (number of record, recommended to be less than 1000'0000)\nFor example here we have:\n1 2 3 4 5 Start Date:\t2020-08-01 End Date:\t2023-11-01 Metrics:\tga:entrances,ga:pageviews,ga:uniquePageviews,ga:avgTimeOnPage,ga:exits Dimensions:\tga:pagePath,ga:date Limit:\t1000 Once you have all the parameter configured, you can proceed to the menu bar and generate the report via \u0026ldquo;extension \u0026gt; google analytics \u0026gt; run reports\u0026rdquo;, which will give you something looks like the following screenshot shows; Note that only partial of the data are valid entries (here \u0026ldquo;A15:G1015\u0026rdquo;), so be mindful of this valid range when you are about to import data to stuff like Google Looker.\nReference\nGoogle Analytics Spreadsheet Add-on How to backup Universal Analytics: Exporting data from Google Analytics and moving to GA4 ","permalink":"https://blog.simon-hu.org/posts/2023.11.13-export-google-analytics-to-sheets-using-add-on/","summary":"Step-1 : Google Account Logged-in To begin with, make sure you are logged in the proper google account, we will use the same account for all of the Google related product in the upcoming steps, including \u0026ldquo;Google Analytics\u0026rdquo; and \u0026ldquo;Google Sheets\u0026rdquo;.\nStep-2: Install Add-on Secondly, with the same google account open \u0026ldquo;google sheet\u0026rdquo;, then open \u0026ldquo;extension \u0026gt; add-on \u0026gt; get add-on\u0026quot; and install the google analytics add-on as denoted in the screenshot:","title":"Export Google Analytics to Google Sheets (using Add-on)"},{"content":"Vim Motion / Keybinding Here I will keep some of the vim motion \u0026amp; keybinding. (meanwhile I will keep updating this to remove those that I got very familiar, and add those that I found useful along the journey):\no/O: add cursor above/below current line\n==: fixing indentation for current line\n=ap: fixing indentation for current paragraph (the inner-most function-like scope structure under cursor)\nyyp : copy current line and paste the line below\n1 2 3 yyp # yy: yank current line into default register # p: paste the default register into the next line (the line below current cursor) Vyp: copy current line and paste the line below\n1 2 3 4 Vyp # V: enter visual line mode # y: yank the current selected line (by default you will be selecting the current line) # p: paste the default register into the next line (the line below current cursor) di\u0026quot;: delete inside the quotation mark (similarly there\u0026rsquo;s di[, di{ etc)\n1 2 3 4 di\u0026#34; # d: stands for delete # i: stands for inside # \u0026#34;: is the identifier, here is the quotation mark \u0026#34; da\u0026quot;: delete quotation mark and its inside cotnent (similarly there\u0026rsquo;s da[, da{ etc)\n1 2 3 da\u0026#34; # d: stands for delete # a: stands for all di\u0026quot;\nd: stands for delete i: stands for inside \u0026ldquo;: is the identifier, here is the quotation mark \u0026quot; 1 # \u0026#34;: is the identifier, here is the quotation mark \u0026#34; Vim Command Here I will keep some of the vim commands (stuff run via :, \u0026ldquo;Enter ⏎\u0026rdquo;):\n:e!: reverting file to the last save version :Ex: exit to current file\u0026rsquo;s working directory (or folder) Reference Vim Motions Guide (2022) - Vim Salesman\n","permalink":"https://blog.simon-hu.org/posts/2023.11.11-my-vim-learning-diary-2/","summary":"Vim Motion / Keybinding Here I will keep some of the vim motion \u0026amp; keybinding. (meanwhile I will keep updating this to remove those that I got very familiar, and add those that I found useful along the journey):\no/O: add cursor above/below current line\n==: fixing indentation for current line\n=ap: fixing indentation for current paragraph (the inner-most function-like scope structure under cursor)\nyyp : copy current line and paste the line below","title":"My Vim Learning Diary 2"},{"content":"PENDING \u0026hellip;.. (Manual Replacement for the \u0026ldquo;Drupal Shield\u0026rdquo; )\nReference LINK-1: How to password protect a website folder using .htaccess LINK-2: Password protecting your site with an .htaccess file (NOT RECOMMENDED) ","permalink":"https://blog.simon-hu.org/posts/2023.11.13-apache-server-shield-using-htaccess-file/","summary":"PENDING \u0026hellip;.. (Manual Replacement for the \u0026ldquo;Drupal Shield\u0026rdquo; )\nReference LINK-1: How to password protect a website folder using .htaccess LINK-2: Password protecting your site with an .htaccess file (NOT RECOMMENDED) ","title":"Shield for Apache Server using htaccess/htpasswd"},{"content":" jQuery Crash Course Series: https://www.youtube.com/watch?v=3nrLc_JOF7k\u0026amp;list=PLgT1LClcgVzFMNgCvv2ar0ZEg_ORBv2bw; PHP and Symfony: https://www.youtube.com/watch?v=a7_WFUlFS94; https://www.youtube.com/watch?v=QPky3r2prEI; https://www.youtube.com/watch?v=Bo0guUbL5uo; ","permalink":"https://blog.simon-hu.org/posts/2023.11.16-drupal-reading-list/","summary":" jQuery Crash Course Series: https://www.youtube.com/watch?v=3nrLc_JOF7k\u0026amp;list=PLgT1LClcgVzFMNgCvv2ar0ZEg_ORBv2bw; PHP and Symfony: https://www.youtube.com/watch?v=a7_WFUlFS94; https://www.youtube.com/watch?v=QPky3r2prEI; https://www.youtube.com/watch?v=Bo0guUbL5uo; ","title":"Drupal Reading List"},{"content":"Intuition I was recently working on a client site, and I got to the issue where the site will show \u0026ldquo;Page unavailable\u0026rdquo; upon login. And upon the suspicion of a mis-placed module or uncleared cache, I wanted to install drush to perform some drush commands.\nI ran composer require drush/drush which will install the most recent compatible drush on my current working directory, but then I got this error:\n1 2 3 4 5 6 ... The \u0026#34;composer/installers\u0026#34; plugin was skipped because it requires a Plugin API version (\u0026#34;^1.0\u0026#34;) that does not match your Composer installation (\u0026#34;2.6.0\u0026#34;). You may need to run composer update with the \u0026#34;--no-plugins\u0026#34; option. The \u0026#34;drupal/core-composer-scaffold\u0026#34; plugin was skipped because it requires a Plugin API version (\u0026#34;^1.0.0\u0026#34;) that does not match your Composer installation (\u0026#34;2.6.0\u0026#34;). You may need to run composer update with the \u0026#34;--no-plugins\u0026#34; option. The \u0026#34;drupal/core-project-message\u0026#34; plugin was skipped because it requires a Plugin API version (\u0026#34;^1.1\u0026#34;) that does not match your Composer installation (\u0026#34;2.6.0\u0026#34;). You may need to run composer update with the \u0026#34;--no-plugins\u0026#34; option. The \u0026#34;drupal/core-vendor-hardening\u0026#34; plugin was skipped because it requires a Plugin API version (\u0026#34;^1.1\u0026#34;) that does not match your Composer installation (\u0026#34;2.6.0\u0026#34;). You may need to run composer update with the \u0026#34;--no-plugins\u0026#34; option. ... After some research, I found this issue could be potentially related to a version mis-match of the composer and the drupal 8 (reference: link), the composer in the project could be of version 1.XX, and the local instance is using version 2.XX \u0026hellip;\nFailed Attempt I quickly went online and found this solution: link, that uses the following command to upgrade/downgrade composer:\n1 2 3 4 # Down-grade to composer 1 sudo composer self-update --1; sudo apt-mark hold sp-composer; # Up-grade to composer 2 sudo apt-mark unhold sp-composer; sudo composer self-update --2 But this one only updates the composer version globally, and it does not solve the issue of installing drush on the current working directory. (I am using MAMP as my web server, and as a result, I will need to update the version of the composer located at /Applications/MAMP/bin/php/composer)\nWorking Solution In order to upgrade the \u0026ldquo;correct\u0026rdquo; composer, I did the following:\nFirst, getting one composer 1.10 version phar file from this site: link. Place it on some location you can found, here I am putting it at my MAMP directory/Applications/MAMP/bin/php/composer.phar.\n(Note: in order to run this file, you will either need to use box command to compile it (box compile composer.php), or use php as the interpreter to run it (php composer.php), Since here we are only using it temporarily, we will use the shortcut of php: `php /Applications/MAMP/bin/php/composer.phar \u0026ndash;version )\nSecond, I will need to find the correct compatible version of drush via the official website, for my instance drush/drush:10\nThird, running the require command to install: php /Applications/MAMP/bin/php/composer.phar require drush/drush:10\nLastly, (OPTIONAL) If the memory is not sufficient during the composer install/update you might see something ilke this: Fatal error: Allowed memory size of 1610612736 bytes exhausted .\nIn order to change the memory limit you will need to add a parameter -d memory_limit=-1 , the command comes together looks like: php -d memory_limit=-1 /Applications/MAMP/bin/php/composer.phar require drush/drush:10\nAs a result you should see the downloaded instance of composer installing drush successfully:\n","permalink":"https://blog.simon-hu.org/posts/2023.11.10-install-drush-on-drupal-8-and-composer-1/","summary":"Intuition I was recently working on a client site, and I got to the issue where the site will show \u0026ldquo;Page unavailable\u0026rdquo; upon login. And upon the suspicion of a mis-placed module or uncleared cache, I wanted to install drush to perform some drush commands.\nI ran composer require drush/drush which will install the most recent compatible drush on my current working directory, but then I got this error:\n1 2 3 4 5 6 .","title":"Install drush on drupal 8 site (using downgraded composer ver.1)"},{"content":"Vim Privilege\nMedium - Why Vim is better than VSCode (About Vim Motion combination of \u0026ldquo;c,i,d\u0026rdquo; command and \u0026ldquo;w,p,\u0026rdquo;,{\u0026quot;)\nFreeCodeCamp - Why Vim Is More than Just an Editor\nVim Motion / Vim Keybindings\nVim Salesman - Vim Motions Guide (2022) Vim Configuration\nThePrimeagen - 0 to LSP : Neovim RC From Scratch\nThePrimeagen - How to Vim in 2023: Tips and Tricks\n","permalink":"https://blog.simon-hu.org/posts/2023.11.13-vim-reading-list/","summary":"Vim Privilege\nMedium - Why Vim is better than VSCode (About Vim Motion combination of \u0026ldquo;c,i,d\u0026rdquo; command and \u0026ldquo;w,p,\u0026rdquo;,{\u0026quot;)\nFreeCodeCamp - Why Vim Is More than Just an Editor\nVim Motion / Vim Keybindings\nVim Salesman - Vim Motions Guide (2022) Vim Configuration\nThePrimeagen - 0 to LSP : Neovim RC From Scratch\nThePrimeagen - How to Vim in 2023: Tips and Tricks","title":"Vim Reading List"},{"content":"Intuition To begin with we need to answer a simple question, why do we need to block traffic from one site to another site, and have everything controlled in this CORS policy ?\nImagine there\u0026rsquo;s two site, site A is a legitimate banking website that provides online finance services, site B is a phishing website that tries to spoof the website A. As a developer you might be aware of API\u0026rsquo;s, and the legitimate banking website is using exactly that to transfer money from account to account, for instance: \u0026ldquo;https://bank-site-a.com/api?from=account1\u0026amp;to=account2\u0026rdquo;. If without any security policy, the phishing site B can copy this exact link and place it on some easily found buttons or links, and once a user (with logged in bank account) clicks on these buttons or links, the transaction will be triggered without the user\u0026rsquo;s permission.\nSuch attack forces authenticated users to submit a request to a Web application against which they are currently authenticated, is called Cross-Site Request Forgery (CSRF).\nAnd the CORS (Cross-Origin Resource Sharing) policy is here to prevent this ! It will allow controlled access to resources from different origins/domain names in web browsers, ensuring security and protecting against cross-site scripting attacks.\nExample CORS Request Type ? The CORS request will be preflighted (preflight request sent) in the following cases:\n1 2 3 - Non-simple request methods: If the request method is other than GET, POST, or HEAD, a preflight request is sent. - Custom request headers: If the request includes custom headers (apart from a few allowed headers like `Accept`, `Accept-Language`, `Content-Language`, `Content-Type`, etc.), a preflight request is sent. - Content-Type header: If the ﻿Content-Type header value is outside the allowed values for simple requests, a preflight request is sent. For all other cases, the request is considered a simple request, and no preflight request is needed\nCORS Simple Request Suppose a user visits http://www.example.com and the page attempts a cross-origin request to fetch data from http://service.example.com. A CORS-compatible browser will attempt to make a cross-origin request to service.example.com as follows.\nThe browser ends request with Origin header to service.example.com: 1 Origin: http://www.example.com The server at service.example.com sends one of these three responses: 1 2 3 A) wild-card: Access-Control-Allow-Origin: * B) with-origin: Access-Control-Allow-Origin: http://www.example.com C) disallow: Access-Control-Allow-Origin: none CORS Preflight Request When performing certain types of cross-domain Ajax requests, modern browsers that support CORS will initiate an extra \u0026ldquo;preflight\u0026rdquo; request to determine whether they have permission to perform the action. Cross-origin requests are preflighted this way because they may have implications to user data.\n1 2 3 4 OPTIONS / Host: service.example.com Origin: http://www.example.com Access-Control-Request-Method: PUT If service.example.com is willing to accept the action, it may respond with the following headers:\n1 2 Access-Control-Allow-Origin: http://www.example.com Access-Control-Allow-Methods: PUT The browser will then make the actual request. If service.example.com does not accept cross-site requests from this origin then it will respond with error to the OPTIONS request and the browser will not make the actual request.\nResolving Cross-Origin Issue From time to time we will have to face the condition where we need to access some portion of the site from another site (for instance: reading font-face or script, fetching data using ajax), and in that scenario, we will need to bypass the Cross-Origin constraint by CORS policy. And we can resolve this via two methods: making the two sites under the same domain (using reverse proxy like apache or nginx), or add the parent site (origin) into the access-allow-origin header of the child site (target).\nMethod-1: Reverse Proxy The first method involves using a reverse proxy router, mapping two sites of the different domain to a different URI of the same domain. For instance we can map \u0026ldquo;www.proxy.com/site-1\u0026rdquo; to \u0026ldquo;www.example.com\u0026rdquo;, \u0026ldquo;www.proxy.com/site-2\u0026rdquo; to \u0026ldquo;www.services.com\u0026rdquo;, and replace the original URL (in the \u0026ldquo;www.example.com\u0026rdquo;) from \u0026ldquo;www.services.com\u0026rdquo; to \u0026ldquo;www.proxy.com/site-2\u0026quot;. Then from the point-of-view of the browser, they are now under the same domain hence will not trigger the CORS policy.\nMethod-2: Add Origin Header The second method involves making modification at the service (side of server), in order for the browser to permit CORS access, the receiver will need to have origin\u0026rsquo;s origin in the \u0026ldquo;access-allow-origin\u0026rdquo; header; For instance, \u0026ldquo;www.example.com\u0026rdquo; initiates the request with header \u0026ldquo;origin:www.example.com\u0026rdquo; to server \u0026ldquo;www.service.com\u0026rdquo;, we will need to put header \u0026ldquo;access-allow-origin:www.example.com\u0026rdquo; for every relating request response from \u0026ldquo;www.service.com\u0026rdquo;.\nReference-1: Wikipedia - Cross-origin resource sharing Reference-2: Bilibili - 底搞懂CORS（跨域资源共享 ","permalink":"https://blog.simon-hu.org/posts/2023.11.08-browser-cors-policy-and-csrf-attack/","summary":"Intuition To begin with we need to answer a simple question, why do we need to block traffic from one site to another site, and have everything controlled in this CORS policy ?\nImagine there\u0026rsquo;s two site, site A is a legitimate banking website that provides online finance services, site B is a phishing website that tries to spoof the website A. As a developer you might be aware of API\u0026rsquo;s, and the legitimate banking website is using exactly that to transfer money from account to account, for instance: \u0026ldquo;https://bank-site-a.","title":"Browser CORS policy"},{"content":"Why do \u0026ldquo;I\u0026rdquo; want to use vim ? Why not VS Code ? To begin with, I am not quite the typical teenage young boy, he who have not tried; I have been coding for more than 4 years now, and at this point I already have some of the tools of my taste.\nIf you\u0026rsquo;d ask for my favorite my current pick is \u0026ldquo;VS Code\u0026rdquo;. Why? because I do not code on any particular language (hence no IDE) and I just happen to land on VS Code by accident, if I would first met \u0026ldquo;Sublime\u0026rdquo;, the answer could be different.\nDon\u0026rsquo;t get me wrong, I do use VS Code to an extent that I am confident to add \u0026ldquo;VS Code\u0026rdquo; as my professionalist on my resume, I have constructed my own VS Code theme, my own settings.json and keybindings.json, use multi-cursor and regular expression editing, and build couple of extensions for my work. I do like VS Code, but it\u0026rsquo;s just there isn\u0026rsquo;t seemingly too much passion in the community about excelling in VS Code.\nDrawback of VSCode After these years of experience with VS Code, I found some of the issues with VS Code that is commonly found by many developers, here are some of them:\nSlow indexing speed when facing large project. Custom setting are not available on my colleague\u0026rsquo;s laptop. Not available as a command-line, always-available application. Get stuck often, due to its extensive use of memory and synchronous operation (meantime of my editing, VS Code is running file indexing, autocomplete suggestions, calculating the context of cursor, and git blame for every line of code change) So here I am, deciding to take a second look at this tool (VIM), of which I firmly deny to use at my young age (I was once so firmly believing in the theory of \u0026ldquo;Occam\u0026rsquo;s razor\u0026rdquo;, thinking all those wizards IDE/Utilities are just for those who do not have a job\u0026hellip;).\nWhy switch VIM ? Recently I met this YouTuber ThePrimeTimeagen which gives contentful tips about best practices being a programmer, he share his insights via reading out aloud while watching related contents (other programmers related topic videos, blog post, etc). For instance, this one got me real good, where one should really learn by doing stuff (the process is like \u0026ldquo;Do a little big\u0026rdquo; → \u0026ldquo;Fail\u0026rdquo; → \u0026ldquo;Struggle\u0026rdquo; → \u0026ldquo;Find a answer\u0026rdquo;), by watching the tutorial you have skipped the fail/struggle bit, hence your memory might become very weak (not to mention that the tutorial only aims for a very narrow use case like a \u0026ldquo;start server section\u0026rdquo; in \u0026ldquo;ReadMe.md\u0026rdquo;).\nHalf of the ThePrimeTimeagen\u0026rsquo;s video is about vim and how good it is, I was a bit cautious on how I should take in his info without getting over biased, but after watching just two videos (this one, and this one), I was convinced\u0026hellip;\nAt this point you might be expecting some dot points listing for the advantage, pros/cons for vim comparing to VS Code, but I am not here to write a post to impressive a bunch of ya, this is just a note for myself to revisit, I\u0026rsquo;ll only list the reasons I am interested into VIM for, check it out in the upcoming section.\nMy Reasons to Use VIM (in case you get lost and wanna quit)\nIt is COOL !!!! No one else knows how you do it and you looks like wizards !!!! It will run fast on any computer, and does not eats up much of the memory. Reference My current vs code configuration(if your are curious)\nSettings: settings.json Keyboard Shortcuts: keybindings.json ThePrimeTimeagen Tutorials Are KILLING Your Growth - ThePrimeTime ","permalink":"https://blog.simon-hu.org/posts/2023.11.10-my-vim-learning-diary-1/","summary":"Why do \u0026ldquo;I\u0026rdquo; want to use vim ? Why not VS Code ? To begin with, I am not quite the typical teenage young boy, he who have not tried; I have been coding for more than 4 years now, and at this point I already have some of the tools of my taste.\nIf you\u0026rsquo;d ask for my favorite my current pick is \u0026ldquo;VS Code\u0026rdquo;. Why? because I do not code on any particular language (hence no IDE) and I just happen to land on VS Code by accident, if I would first met \u0026ldquo;Sublime\u0026rdquo;, the answer could be different.","title":"My Vim Learning Diary 1"},{"content":"(This one is very similar to where I fix the issue of theme not getting recognized, so if you have checked that one out, the procedure is the same, you will just have to uninstall the manually installed module, and use composer to install module instead)\nDuring the course of the upgrade, it is found that after the upgrade drupal 10 consistently fails to recognize bootstrap theme, resulting in a site with plain html and css, this post will help you resolve this issue.\nStep-1: Install using composer\nTo begin with you will need to install the module using composer, this will place your module inside the $drupal-root/module/contrib folder, for instance run composer require 'drupal/XXXX:^3.29' will download the drupal bootstrap 3.29 module and place it in folder $drupal-root/module/contrib/XXXX.\nStep-2: Remove original module\nThen you will need to remove the original folder located at the $drupal-root/module for this instance, the original bootstrap base module is located at $drupal-root/module/XXXX, you will need to remove it.\nStep-3: Clear Cache\nLastly, we will need to let drupal correctly identify the location of the new composer installed module, simply clear the cache using the admin panel or run drush cr in terminal.\n","permalink":"https://blog.simon-hu.org/posts/2023.11.01-fixing-module-not-getting-recognised/","summary":"Quick fix to the issue of module not getting recognized after upgrading from drupal-9 to drupal-10","title":"Fixing module not getting recognized"},{"content":"Breakdown of the email address In general a email address is in formatted as username @ domain.com, we can break it down into:\nAddress after the @ sign, here domain.com, this is the domain of the target mail server, your server will check MX records of this domain from the DNS server, and sends the email to the corresponding IP of the domain. Address before the @ sign, here username, is where the mail receiving server will put your emails at. In a classical mail (receiver) server, each user will have a unique folder, once a user ges a email from somebody on the internet, his/her email will get stored into this folder, here imagine there\u0026rsquo;s a \\username folder where all the .eml files will be located at. Sending email with help of DNS system Email server is distinctive from the DNS system, in order for the email to work, the DNS system must be working. As the DNS system is the one that translates the domain name to the IP address, and the IP address is the one that is used by the email server to send and receive emails.\nBasic use-case of MX records\nOnce a email sender server request for the receiver server\u0026rsquo;s address (using a domain name such as gmail.com, outlook.com, usually anything that comes after the @ sign), they DNS server will check its DNS MX records and return the IP address. (note that alike the usual A and CNAME DNS record, the records will get cached onto your local network infrastructure until it reaches its its end of TTL) The mail sender server will then send the email through using the IP address. Multiple MX records\nDNS system also have a unique features that will email server more stable, like how you might setup multiple web server redundancy in case of network failure, you can have multiple mail servers ready for receiving in case of a server failure on one server. This is achieved via having multiple MX records on the DNS server (for instance MX1=111.111.111, MX2=222.222.222, MX3=333.333.333 ), if the mail sender fails to send the email to the the MX1 server (it might be busy, or down), the email will get send to the MX2 server (which will only temporally store the email and send it to the main MX1 server whenever it become available again; There can only be one server that saves the mails, MX2 only store the email before MX1 comes back) Reference:\nhttp://www.qqgzs.com/archives/email-dns.html https://cloud.tencent.com/developer/article/1115106 ","permalink":"https://blog.simon-hu.org/posts/2023.11.01-mail-server-and-dns-mx-record/","summary":"Breakdown of the email address In general a email address is in formatted as username @ domain.com, we can break it down into:\nAddress after the @ sign, here domain.com, this is the domain of the target mail server, your server will check MX records of this domain from the DNS server, and sends the email to the corresponding IP of the domain. Address before the @ sign, here username, is where the mail receiving server will put your emails at.","title":"How does Mail works with DNS MX records"},{"content":"Handle for deprecated function drupal_get_path()\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # Node - drupal_get_path(\u0026#39;module\u0026#39;, \u0026#39;node\u0026#39;) + \\Drupal::service(\u0026#39;extension.list.module\u0026#39;)-\u0026gt;getPath(\u0026#39;node\u0026#39;) # Node (Alternative) - drupal_get_path(\u0026#39;module\u0026#39;, \u0026#39;node\u0026#39;) + \\Drupal::service(\u0026#39;extension.path.resolver\u0026#39;)-\u0026gt;getPath(\u0026#39;module\u0026#39;, \u0026#39;node\u0026#39;) # Theme - drupal_get_path(\u0026#39;theme\u0026#39;, \u0026#39;seven\u0026#39;) + \\Drupal::service(\u0026#39;extension.list.theme\u0026#39;)-\u0026gt;getPath(\u0026#39;seven\u0026#39;) # Standard - drupal_get_path(\u0026#39;profile\u0026#39;, \u0026#39;standard\u0026#39;) + \\Drupal::service(\u0026#39;extension.list.profile\u0026#39;)-\u0026gt;getPath(\u0026#39;standard\u0026#39;) Handle for deprecated function drupal_get_filename()\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # Node - drupal_get_filename(\u0026#39;module\u0026#39;, \u0026#39;node\u0026#39;) + \\Drupal::service(\u0026#39;extension.list.module\u0026#39;)-\u0026gt;getPathname(\u0026#39;node\u0026#39;) # Node (alternative) - drupal_get_filename(\u0026#39;module\u0026#39;, \u0026#39;node\u0026#39;) + \\Drupal::service(\u0026#39;extension.path.resolver\u0026#39;)-\u0026gt;getPathname(\u0026#39;module\u0026#39;, \u0026#39;node\u0026#39;) # Theme - drupal_get_filename(\u0026#39;theme\u0026#39;, \u0026#39;seven\u0026#39;) + \\Drupal::service(\u0026#39;extension.list.theme\u0026#39;)-\u0026gt;getPathname(\u0026#39;seven\u0026#39;) # Standard - drupal_get_filename(\u0026#39;profile\u0026#39;, \u0026#39;standard\u0026#39;) + \\Drupal::service(\u0026#39;extension.list.profile\u0026#39;)-\u0026gt;getPathname(\u0026#39;standard\u0026#39;) Reference Material:\nhttps://www.drupal.org/node/2940438 ","permalink":"https://blog.simon-hu.org/posts/2023.10.31-deprecation-drupal_get_path-drupal_get_filename/","summary":"Fixing custom modules\u0026rsquo; code that are dependent of function drupal_get_path() and drupal_get_filename() which is deprecating in newest drupal 10, hence making it compatible for the upgrade (only for temporal purpose).","title":"Deprecation of \"path/filename\" api"},{"content":"Handle for deprecated function “file_create_url() and “file_url_transform_relative()\n1 2 3 4 5 6 7 8 9 10 11 - file_create_url($uri) + \\Drupal::service(\u0026#39;file_url_generator\u0026#39;)-\u0026gt;generateAbsoluteString($uri) - file_url_transform_relative($file_url) + \\Drupal::service(\u0026#39;file_url_generator\u0026#39;)-\u0026gt;transformRelative($file_url) - file_url_transform_relative(file_create_url($uri) + \\Drupal::service(\u0026#39;file_url_generator\u0026#39;)-\u0026gt;generateString($uri) - Drupal\\Core\\Url::fromUri(file_create_url($uri)) + \\Drupal::service(\u0026#39;file_url_generator\u0026#39;)-\u0026gt;generate($uri) Reference Material:\nhttps://www.drupal.org/node/2940031 ","permalink":"https://blog.simon-hu.org/posts/2023.10.31-deprecation-file_create_url-and-file_url_transform_relative/","summary":"Fixing custom modules\u0026rsquo; code that are dependent of function file_create_url() and file_url_transform_relative() which is deprecating in newest drupal 10, hence making it compatible for the upgrade (only for temporal purpose).","title":"Deprecation of \"url\" api"},{"content":" PSR-1: Basic Coding Standard Naming Conventions\nClasses: StudlyCaps\n1 2 3 class ClassName { // ... } Methods: camelCase\n1 2 3 4 5 class ClassName { public function methodName() { // ... } } Constants: UPPER_CASE_WITH_UNDERSCORES\n1 2 3 class ClassName { const CONSTANT_NAME = \u0026#39;value\u0026#39;; } PSR-2: Coding Style Guide Coding Styling:\nIndentation: 4 spaces(as the tab) Opening brances for new class: on the new line Control structure should be followed by: single space (if / else / while) Function structure should: not have space (after the function name) 1 2 3 4 5 6 7 8 9 10 11 class ClassName { public function methodName($arg1, $arg2) { if ($arg1 === $arg2) { return true; } else { return false; } } } PSR-4: Autoloading Standard PSR-4 is a modern autoloading standard that simplifies the process of including PHP files in your codebase. It requires:\nA one-to-one relationship between class names and file paths. Namespace declarations to match the directory structure. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 // ------------------------------------------- // File: src/ExampleNamespace/ExampleClass.php namespace ExampleNamespace; class ExampleClass { // ... } // ------------------------------------------- // Usage of the ExampleClass.php File require \u0026#39;vendor/autoload.php\u0026#39;; use ExampleNamespace\\ExampleClass; $example = new ExampleClass(); Reference: https://reintech.io/blog/php-and-psr-standards-writing-clean-and-compatible-php-code\n","permalink":"https://blog.simon-hu.org/posts/2023.10.31-drupal-custom-module-psr4-standards/","summary":"[Drupal Custom Module] PHP PSR Standards","title":"Drupal custom module (PSR4) standard"},{"content":"During the course of the upgrade, it is found that after the upgrade drupal 10 consistently fails to recognize bootstrap theme, resulting in a site with plain html and css, this post will help you resolve this issue.\nStep-1: Install using composer\nTo begin with you will need to install the theme using composer, this will place your theme inside the $drupal-root/theme/contrib folder, for instance run composer require 'drupal/bootstrap:^3.29' will download the drupal bootstrap 3.29 theme and place it in folder $drupal-root/theme/contrib/bootstrap.\nStep-2: Remove original theme\nThen you will need to remove the original folder located at the $drupal-root/theme for this instance, the original bootstrap base theme is located at $drupal-root/theme/bootstrap, you will need to remove it.\nStep-3: Clear Cache\nLastly, we will need to let drupal correctly identify the location of the new composer installed theme, simply clear the cache using the admin panel or run drush cr in terminal.\n","permalink":"https://blog.simon-hu.org/posts/2023.10.31-fixing-theme-not-getting-recognised/","summary":"Quick fix to the issue of theme not getting recognized after upgrading from drupal-9 to drupal-10","title":"Fixing bootstrap theme not getting recognized"},{"content":"This tutorial provides step-by-step instructions to address the strange problem where, upon accessing a website, the index.php file begins to download instead of opening as intended. Users may encounter a dialog box prompting them to download the file, unsure of how to proceed when faced with options to open, close, or cancel. This article aims to guide you in resolving this issue effectively.\nSolution 1: Rebooting your web development environment Sometimes it will be a easy fix like rebooting your development environment / software, for my instance I am using MAMP, and by stopping the server and opening it again, solved 99% of my issues\nSolution 2: Move MIME type \u0026ldquo;application/x-httpd-php\u0026rdquo; to highest priority In file MimeTypes.php, move the application/x-httpd-php to the very bottom of the page, this will ensure your php handler is put on the highest priority.\nThe purpose of the MIME type \u0026ldquo;application/x-httpd-php\u0026rdquo; is to indicate that a file being served by a web server is a PHP script. MIME types are used to identify the nature and format of a file so that the browser or other client software can handle it appropriately. In the case of \u0026ldquo;application/x-httpd-php,\u0026rdquo; it tells the browser that the file should be processed by the server as a PHP script rather than being displayed directly to the user. This MIME type is crucial in ensuring that the PHP script is executed correctly on the server side before the resulting HTML or other output is sent to the browser for rendering.\nThis is proposed by “franck22” at drupal community post: https://www.drupal.org/forum/support/post-installation/2004-05-14/indexphp-starts-to-download-instead-of-opening\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 - ---------------------------before changes - ... - private const MAP = [ - .... - .... - \u0026#39;application/x-httpd-php\u0026#39; =\u0026gt; [\u0026#39;php\u0026#39;], - .... - .... - ] - ... - + ---------------------------after changes + ... + private const MAP = [ + .... + .... + .... + .... + \u0026#39;application/x-httpd-php\u0026#39; =\u0026gt; [\u0026#39;php\u0026#39;], + ] + ... ","permalink":"https://blog.simon-hu.org/posts/2023.10.27-downloads-file-instead-of-opening-it/","summary":"This tutorial provides step-by-step instructions to address the strange problem where, upon accessing a website, the index.php file begins to download instead of opening as intended. Users may encounter a dialog box prompting them to download the file, unsure of how to proceed when faced with options to open, close, or cancel. This article aims to guide you in resolving this issue effectively.\nSolution 1: Rebooting your web development environment Sometimes it will be a easy fix like rebooting your development environment / software, for my instance I am using MAMP, and by stopping the server and opening it again, solved 99% of my issues","title":"Websites downloads the PHP-File instead of opening the website"},{"content":"You can follow the following template + example to update your modules to make it drupal 10 compatible:\nTemplate: your-module-name.libraries.yml\n1 2 3 4 5 6 7 8 drupal.form: js: js/your-library-file.js: {} dependencies: - some-origina/dependency + - core/drupal + - core/jquery + - core/once your-library-file.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 - (function ($, window, Drupal, drupalSettings) { + (function ($, window, Drupal, drupalSettings, once) { ... Drupal.behaviors.myfeature = { attach(context) { - const elements = once(\u0026#39;myfeature\u0026#39;, \u0026#39;[data-myfeature]\u0026#39;, context); + const $elements = $(once(\u0026#39;myfeature\u0026#39;, \u0026#39;[data-myfeature]\u0026#39;, context)); .... - elements.forEach(processingCallback); + $elements.each(processingCallback); } }; function processingCallback(index, value) {} ... - })(jQuery, this, Drupal, drupalSettings); + })(jQuery, this, Drupal, drupalSettings, once); Example bootstrap.libraries.yml\n1 2 3 4 5 6 7 8 drupal.form: js: js/misc/form.js: {} dependencies: - bootstrap/theme + - core/drupal + - core/jquery + - core/once form.js\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 - (function ($, window, Drupal, drupalSettings) { + (function ($, window, Drupal, drupalSettings, once) { Drupal.behaviors.bootstrapForm = { attach: function (context) { if (drupalSettings.bootstrap \u0026amp;\u0026amp; drupalSettings.bootstrap.forms_has_error_value_toggle) { - var $context = $(context); - $context.find(\u0026#39;.form-item.has-error:not(.form-type-password.has-feedback)\u0026#39;).once(\u0026#39;error\u0026#39;).each(function () { - const $elements = $(once(\u0026#39;myfeature\u0026#39;, \u0026#39;[data-myfeature]\u0026#39;, context)); - var $formItem = $(this); - var $input = $formItem.find(\u0026#39;:input\u0026#39;); - $input.on(\u0026#39;keyup focus blur\u0026#39;, function () { - if (this.defaultValue !== void 0) { - $formItem[this.defaultValue !== this.value ? \u0026#39;removeClass\u0026#39; : \u0026#39;addClass\u0026#39;](\u0026#39;has-error\u0026#39;); - $input[this.defaultValue !== this.value ? \u0026#39;removeClass\u0026#39; : \u0026#39;addClass\u0026#39;](\u0026#39;error\u0026#39;); - } - }); - }); + const $elements = $(once(\u0026#39;.form-item.has-error:not(.form-type-password.has-feedback)\u0026#39;, \u0026#39;error\u0026#39;, context)); + $elements.each(function () { + const $elements = $(once(\u0026#39;myfeature\u0026#39;, \u0026#39;[data-myfeature]\u0026#39;, context)); + var $formItem = $(this); + var $input = $formItem.find(\u0026#39;:input\u0026#39;); + $input.on(\u0026#39;keyup focus blur\u0026#39;, function () { + if (this.defaultValue !== void 0) { + $formItem[this.defaultValue !== this.value ? \u0026#39;removeClass\u0026#39; : \u0026#39;addClass\u0026#39;](\u0026#39;has-error\u0026#39;); + $input[this.defaultValue !== this.value ? \u0026#39;removeClass\u0026#39; : \u0026#39;addClass\u0026#39;](\u0026#39;error\u0026#39;); + } + }); + }); } } }; - })(jQuery, this, Drupal, drupalSettings); + })(jQuery, this, Drupal, drupalSettings, once); Reference:\nhttps://www.drupal.org/node/3158256 ","permalink":"https://blog.simon-hu.org/posts/2023.10.24-deprecation-jquery.once/","summary":"Fixing custom modules\u0026rsquo; code that are dependent of jquery.once which is changing its api in newest drupal 10, hence making it compatible for the upgrade.","title":"Deprecation of \"jquery.once\" api"},{"content":" ","permalink":"https://blog.simon-hu.org/resume/","summary":" ","title":"Resume"}]