<!doctype html><html lang=en dir=auto><head><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-WJB975HH")</script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>What/Why Google Tag Manager (GTM) | Simon's Blog</title><meta name=keywords content="Google Tag Manager,GTM"><meta name=description content="Intuition To begin with, I looked for the definition of &ldquo;tag&rdquo; in the Google Tag Manager&rsquo;s context, according to their official documentation, they refer tags as &ldquo;segments of code provided by analytics, marketing, and support vendors to help you integrate their product into your website or mobile apps&rdquo;, so bascially you can think of tag like a chunk of script for third party plug-in (like for example: HotJar (a digital expereience insight and behavior analytics tool))"><meta name=author content="Suowei Hu"><link rel=canonical href=https://blog.simon-hu.org/posts/2023.11.14-what-and-why-google-tag-manager/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.89e7a3cfb9906f56d1ff70930818833a11ce408c7bcab0b72a35ffe53439a75c.css integrity="sha256-ieejz7mQb1bR/3CTCBiDOhHOQIx7yrC3KjX/5TQ5p1w=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.simon-hu.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.simon-hu.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.simon-hu.org/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.simon-hu.org/apple-touch-icon.png><link rel=mask-icon href=https://blog.simon-hu.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="What/Why Google Tag Manager (GTM)"><meta property="og:description" content="Intuition To begin with, I looked for the definition of &ldquo;tag&rdquo; in the Google Tag Manager&rsquo;s context, according to their official documentation, they refer tags as &ldquo;segments of code provided by analytics, marketing, and support vendors to help you integrate their product into your website or mobile apps&rdquo;, so bascially you can think of tag like a chunk of script for third party plug-in (like for example: HotJar (a digital expereience insight and behavior analytics tool))"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.simon-hu.org/posts/2023.11.14-what-and-why-google-tag-manager/"><meta property="og:image" content="https://blog.simon-hu.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-14T00:00:00+00:00"><meta property="article:modified_time" content="2023-11-14T00:00:00+00:00"><meta property="og:site_name" content="Simon's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.simon-hu.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="What/Why Google Tag Manager (GTM)"><meta name=twitter:description content="Intuition To begin with, I looked for the definition of &ldquo;tag&rdquo; in the Google Tag Manager&rsquo;s context, according to their official documentation, they refer tags as &ldquo;segments of code provided by analytics, marketing, and support vendors to help you integrate their product into your website or mobile apps&rdquo;, so bascially you can think of tag like a chunk of script for third party plug-in (like for example: HotJar (a digital expereience insight and behavior analytics tool))"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.simon-hu.org/posts/"},{"@type":"ListItem","position":2,"name":"What/Why Google Tag Manager (GTM)","item":"https://blog.simon-hu.org/posts/2023.11.14-what-and-why-google-tag-manager/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"What/Why Google Tag Manager (GTM)","name":"What\/Why Google Tag Manager (GTM)","description":"Intuition To begin with, I looked for the definition of \u0026ldquo;tag\u0026rdquo; in the Google Tag Manager\u0026rsquo;s context, according to their official documentation, they refer tags as \u0026ldquo;segments of code provided by analytics, marketing, and support vendors to help you integrate their product into your website or mobile apps\u0026rdquo;, so bascially you can think of tag like a chunk of script for third party plug-in (like for example: HotJar (a digital expereience insight and behavior analytics tool))","keywords":["Google Tag Manager","GTM"],"articleBody":"Intuition To begin with, I looked for the definition of “tag” in the Google Tag Manager’s context, according to their official documentation, they refer tags as “segments of code provided by analytics, marketing, and support vendors to help you integrate their product into your website or mobile apps”, so bascially you can think of tag like a chunk of script for third party plug-in (like for example: HotJar (a digital expereience insight and behavior analytics tool))\nSo why would you want to include Google Tag Manager (GTM) to help you control these “tag(s)”, isn’t it easier to just have these “tag(s)” writting into the .html file ? (or .twig template in the Drupal world); This is of course, because there’s benifits from using Google Tag Manager:\nConsolidation: the Google Tag Manager allows a centered single place to control to tags, and have different rule-based triggers that allows fire of different tags on different scenarios (for instance different tags on mobile and desktop) Speed: unlike having all tags in the html documentation, the Goggle Tag Manager will loads multiple tags asynchronously, hence improve page load times **Workflow **: it is earlier to add/modify tags once setup, you wont have to repeat the process of “loggin into server → change code → clear cache → wait for client side cache to expire”. Further more it allows collaboration between multiple teams, for instance two teams can work on “google analytics tags” and another working on “google ads tags” without conflicts. For more details, you can refer to official documentation: Tag Manager Overview\nBasic Setup Let’s say there’s this scenario where one wanna setup ","wordCount":"493","inLanguage":"en","datePublished":"2023-11-14T00:00:00Z","dateModified":"2023-11-14T00:00:00Z","author":{"@type":"Person","name":"Suowei Hu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.simon-hu.org/posts/2023.11.14-what-and-why-google-tag-manager/"},"publisher":{"@type":"Organization","name":"Simon's Blog","logo":{"@type":"ImageObject","url":"https://blog.simon-hu.org/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.simon-hu.org/ accesskey=h title="Simon's Blog (Alt + H)">Simon's Blog</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.simon-hu.org/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.simon-hu.org/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.simon-hu.org/read/ title="<Read>"><span>&lt;Read></span></a></li><li><a href=https://blog.simon-hu.org/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJB975HH" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><article class=post-single><header class=post-header><h1 class=post-title>What/Why Google Tag Manager (GTM)</h1><div class=post-meta><span title='2023-11-14 00:00:00 +0000 UTC'>Nov 14, 2023</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;493 words&nbsp;·&nbsp;Suowei Hu&nbsp;|&nbsp;<a href=https://github.com/SuoweiHu/SuoweiHu.github.io/content/posts/2023.11.14%20What%20and%20why%20Google%20Tag%20Manager/index.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><h2 id=intuition>Intuition<a hidden class=anchor aria-hidden=true href=#intuition>#</a></h2><p>To begin with, I looked for the definition of &ldquo;tag&rdquo; in the Google Tag Manager&rsquo;s context, according to their <a href=https://support.google.com/tagmanager/answer/3281060>official documentation</a>, they refer tags as &ldquo;segments of code provided by analytics, marketing, and support vendors to help you integrate their product into your website or mobile apps&rdquo;, so bascially you can think of tag like a chunk of script for third party plug-in (like for example: HotJar (a digital expereience insight and behavior analytics tool))</p><p><img loading=lazy src=image-20231114142828720.png alt=image-20231114142828720></p><p>So why would you want to include Google Tag Manager (GTM) to help you control these &ldquo;tag(s)&rdquo;, isn&rsquo;t it easier to just have these &ldquo;tag(s)&rdquo; writting into the <code>.html</code> file ? (or <code>.twig</code> template in the Drupal world); This is of course, because there&rsquo;s benifits from using Google Tag Manager:</p><ul><li><strong>Consolidation</strong>: the Google Tag Manager allows a centered single place to control to tags, and have different rule-based triggers that allows fire of different tags on different scenarios (for instance different tags on mobile and desktop)</li><li><strong>Speed</strong>: unlike having all tags in the html documentation, the Goggle Tag Manager will loads multiple tags asynchronously, hence improve page load times</li><li>**Workflow **: it is earlier to add/modify tags once setup, you wont have to repeat the process of &ldquo;loggin into server → change code → clear cache → wait for client side cache to expire&rdquo;. Further more it allows collaboration between multiple teams, for instance two teams can work on &ldquo;google analytics tags&rdquo; and another working on &ldquo;google ads tags&rdquo; without conflicts.</li></ul><p><img loading=lazy src=image-20231114142923126.png alt=image-20231114142923126></p><p>For more details, you can refer to official documentation: <a href="https://support.google.com/tagmanager/answer/6102821?hl=en">Tag Manager Overview</a></p><h2 id=basic-setup>Basic Setup<a hidden class=anchor aria-hidden=true href=#basic-setup>#</a></h2><p>Let&rsquo;s say there&rsquo;s this scenario where one wanna setup <code>&lt;script type="application/ld+json"></code> in a normal HTML file; (The purpose of <code>﻿&lt;script type="application/ld+json"></code> is to embed structured data in JSON format within an HTML page. This data is used to provide additional context and information about the content on the page, helping search engines and other applications better understand and interpret the content. It is commonly used for implementing schema.org markup to enhance search engine optimization and improve the visibility of web pages in search results.)</p><p><strong>First</strong>, create a GTM account.
<strong>Second</strong>, you will need to following the guide, and add the <code>&lt;script></code> code provided by GTM: (<a href=image-20231114143023149.png>ScreenShot</a>)</p><ul><li><p>Add the following to the <code>&lt;head></code>of the page (as high of the code as possible)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- Google Tag Manager --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>script</span><span class=p>&gt;(</span><span class=kd>function</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span><span class=nx>d</span><span class=p>,</span><span class=nx>s</span><span class=p>,</span><span class=nx>l</span><span class=p>,</span><span class=nx>i</span><span class=p>){</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=o>=</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>]</span><span class=o>||</span><span class=p>[];</span><span class=nx>w</span><span class=p>[</span><span class=nx>l</span><span class=p>].</span><span class=nx>push</span><span class=p>({</span><span class=s1>&#39;gtm.start&#39;</span><span class=o>:</span>
</span></span><span class=line><span class=cl><span class=k>new</span> <span class=nb>Date</span><span class=p>().</span><span class=nx>getTime</span><span class=p>(),</span><span class=nx>event</span><span class=o>:</span><span class=s1>&#39;gtm.js&#39;</span><span class=p>});</span><span class=kd>var</span> <span class=nx>f</span><span class=o>=</span><span class=nx>d</span><span class=p>.</span><span class=nx>getElementsByTagName</span><span class=p>(</span><span class=nx>s</span><span class=p>)[</span><span class=mi>0</span><span class=p>],</span>
</span></span><span class=line><span class=cl><span class=nx>j</span><span class=o>=</span><span class=nx>d</span><span class=p>.</span><span class=nx>createElement</span><span class=p>(</span><span class=nx>s</span><span class=p>),</span><span class=nx>dl</span><span class=o>=</span><span class=nx>l</span><span class=o>!=</span><span class=s1>&#39;dataLayer&#39;</span><span class=o>?</span><span class=s1>&#39;&amp;l=&#39;</span><span class=o>+</span><span class=nx>l</span><span class=o>:</span><span class=s1>&#39;&#39;</span><span class=p>;</span><span class=nx>j</span><span class=p>.</span><span class=kr>async</span><span class=o>=</span><span class=kc>true</span><span class=p>;</span><span class=nx>j</span><span class=p>.</span><span class=nx>src</span><span class=o>=</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;https://www.googletagmanager.com/gtm.js?id=&#39;</span><span class=o>+</span><span class=nx>i</span><span class=o>+</span><span class=nx>dl</span><span class=p>;</span><span class=nx>f</span><span class=p>.</span><span class=nx>parentNode</span><span class=p>.</span><span class=nx>insertBefore</span><span class=p>(</span><span class=nx>j</span><span class=p>,</span><span class=nx>f</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>})(</span><span class=nb>window</span><span class=p>,</span><span class=nb>document</span><span class=p>,</span><span class=s1>&#39;script&#39;</span><span class=p>,</span><span class=s1>&#39;dataLayer&#39;</span><span class=p>,</span><span class=s1>&#39;GTM-W92NBFNR&#39;</span><span class=p>);&lt;/</span><span class=nt>script</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- End Google Tag Manager --&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Add the following imeediately after the opening <code>&lt;body></code> tag</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=c>&lt;!-- Google Tag Manager (noscript) --&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>noscript</span><span class=p>&gt;&lt;</span><span class=nt>iframe</span> <span class=na>src</span><span class=o>=</span><span class=s>&#34;https://www.googletagmanager.com/ns.html?id=GTM-W92NBFNR&#34;</span>
</span></span><span class=line><span class=cl><span class=na>height</span><span class=o>=</span><span class=s>&#34;0&#34;</span> <span class=na>width</span><span class=o>=</span><span class=s>&#34;0&#34;</span> <span class=na>style</span><span class=o>=</span><span class=s>&#34;display:none;visibility:hidden&#34;</span><span class=p>&gt;&lt;/</span><span class=nt>iframe</span><span class=p>&gt;&lt;/</span><span class=nt>noscript</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=c>&lt;!-- End Google Tag Manager (noscript) --&gt;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>Test the website using the GTM&rsquo;s built in tool</p></li></ul><p><strong>Third</strong>, proceed to the left bar, choose &ldquo;tag&rdquo; and then &ldquo;create a tag&rdquo;, here we will put <code>&lt;script type="application/ld+json"></code> and trigger it on every page (trigger basically means the condition it will get rendered)</p><p><img loading=lazy src=2023.11.14%20-%20143234.png alt="2023.11.14 - 143234"></p><p><strong>Lastly</strong>, see it take effect&mldr;</p><p><img loading=lazy src=2023.11.14%20-%20144832.jpg alt="2023.11.14 - 144832"></p><p>You may also test it via <a href=https://validator.schema.org/>https://validator.schema.org/</a></p><p><img loading=lazy src=2023.11.14%20-%20151904.jpg alt="2023.11.14 - 151904"></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.simon-hu.org/tags/google-tag-manager/>Google Tag Manager</a></li><li><a href=https://blog.simon-hu.org/tags/gtm/>GTM</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.simon-hu.org/>Simon's Blog</a></span><br><span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>