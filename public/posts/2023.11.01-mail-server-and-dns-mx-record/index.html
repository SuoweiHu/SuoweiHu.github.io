<!doctype html><html lang=en dir=auto><head><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-WJB975HH")</script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How does Mail works with DNS MX records | Simon's Blog</title><meta name=keywords content="DNS,MX Record,Mail Server"><meta name=description content="Breakdown of the email address In general a email address is in formatted as username @ domain.com, we can break it down into:
Address after the @ sign, here domain.com, this is the domain of the target mail server, your server will check MX records of this domain from the DNS server, and sends the email to the corresponding IP of the domain. Address before the @ sign, here username, is where the mail receiving server will put your emails at."><meta name=author content="Suowei Hu"><link rel=canonical href=https://blog.simon-hu.org/posts/2023.11.01-mail-server-and-dns-mx-record/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.89e7a3cfb9906f56d1ff70930818833a11ce408c7bcab0b72a35ffe53439a75c.css integrity="sha256-ieejz7mQb1bR/3CTCBiDOhHOQIx7yrC3KjX/5TQ5p1w=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.simon-hu.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.simon-hu.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.simon-hu.org/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.simon-hu.org/apple-touch-icon.png><link rel=mask-icon href=https://blog.simon-hu.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="How does Mail works with DNS MX records"><meta property="og:description" content="Breakdown of the email address In general a email address is in formatted as username @ domain.com, we can break it down into:
Address after the @ sign, here domain.com, this is the domain of the target mail server, your server will check MX records of this domain from the DNS server, and sends the email to the corresponding IP of the domain. Address before the @ sign, here username, is where the mail receiving server will put your emails at."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.simon-hu.org/posts/2023.11.01-mail-server-and-dns-mx-record/"><meta property="og:image" content="https://blog.simon-hu.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-01T00:00:00+00:00"><meta property="article:modified_time" content="2023-11-01T00:00:00+00:00"><meta property="og:site_name" content="Simon's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.simon-hu.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="How does Mail works with DNS MX records"><meta name=twitter:description content="Breakdown of the email address In general a email address is in formatted as username @ domain.com, we can break it down into:
Address after the @ sign, here domain.com, this is the domain of the target mail server, your server will check MX records of this domain from the DNS server, and sends the email to the corresponding IP of the domain. Address before the @ sign, here username, is where the mail receiving server will put your emails at."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.simon-hu.org/posts/"},{"@type":"ListItem","position":2,"name":"How does Mail works with DNS MX records","item":"https://blog.simon-hu.org/posts/2023.11.01-mail-server-and-dns-mx-record/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How does Mail works with DNS MX records","name":"How does Mail works with DNS MX records","description":"Breakdown of the email address In general a email address is in formatted as username @ domain.com, we can break it down into:\nAddress after the @ sign, here domain.com, this is the domain of the target mail server, your server will check MX records of this domain from the DNS server, and sends the email to the corresponding IP of the domain. Address before the @ sign, here username, is where the mail receiving server will put your emails at.","keywords":["DNS","MX Record","Mail Server"],"articleBody":"Breakdown of the email address In general a email address is in formatted as username @ domain.com, we can break it down into:\nAddress after the @ sign, here domain.com, this is the domain of the target mail server, your server will check MX records of this domain from the DNS server, and sends the email to the corresponding IP of the domain. Address before the @ sign, here username, is where the mail receiving server will put your emails at. In a classical mail (receiver) server, each user will have a unique folder, once a user ges a email from somebody on the internet, his/her email will get stored into this folder, here imagine there’s a \\username folder where all the .eml files will be located at. Sending email with help of DNS system Email server is distinctive from the DNS system, in order for the email to work, the DNS system must be working. As the DNS system is the one that translates the domain name to the IP address, and the IP address is the one that is used by the email server to send and receive emails.\nBasic use-case of MX records\nOnce a email sender server request for the receiver server’s address (using a domain name such as gmail.com, outlook.com, usually anything that comes after the @ sign), they DNS server will check its DNS MX records and return the IP address. (note that alike the usual A and CNAME DNS record, the records will get cached onto your local network infrastructure until it reaches its its end of TTL) The mail sender server will then send the email through using the IP address. Multiple MX records\nDNS system also have a unique features that will email server more stable, like how you might setup multiple web server redundancy in case of network failure, you can have multiple mail servers ready for receiving in case of a server failure on one server. This is achieved via having multiple MX records on the DNS server (for instance MX1=111.111.111, MX2=222.222.222, MX3=333.333.333 ), if the mail sender fails to send the email to the the MX1 server (it might be busy, or down), the email will get send to the MX2 server (which will only temporally store the email and send it to the main MX1 server whenever it become available again; There can only be one server that saves the mails, MX2 only store the email before MX1 comes back) Reference:\nhttp://www.qqgzs.com/archives/email-dns.html https://cloud.tencent.com/developer/article/1115106 ","wordCount":"416","inLanguage":"en","datePublished":"2023-11-01T00:00:00Z","dateModified":"2023-11-01T00:00:00Z","author":{"@type":"Person","name":"Suowei Hu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.simon-hu.org/posts/2023.11.01-mail-server-and-dns-mx-record/"},"publisher":{"@type":"Organization","name":"Simon's Blog","logo":{"@type":"ImageObject","url":"https://blog.simon-hu.org/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.simon-hu.org/ accesskey=h title="Simon's Blog (Alt + H)">Simon's Blog</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.simon-hu.org/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.simon-hu.org/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.simon-hu.org/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.simon-hu.org/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJB975HH" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><article class=post-single><header class=post-header><h1 class=post-title>How does Mail works with DNS MX records</h1><div class=post-meta><span title='2023-11-01 00:00:00 +0000 UTC'>Nov 1, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;416 words&nbsp;·&nbsp;Suowei Hu&nbsp;|&nbsp;<a href=https://github.com/SuoweiHu/SuoweiHu.github.io/content/posts/2023.11.01%20mail%20server%20and%20dns%20mx%20record/index.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><h2 id=breakdown-of-the-email-address>Breakdown of the email address<a hidden class=anchor aria-hidden=true href=#breakdown-of-the-email-address>#</a></h2><p>In general a email address is in formatted as <code>username @ domain.com</code>, we can break it down into:</p><ul><li>Address after the <code>@</code> sign, here <code>domain.com</code>, this is the domain of the target mail server, your server will check MX records of this domain from the DNS server, and sends the email to the corresponding IP of the domain.</li><li>Address before the <code>@</code> sign, here <code>username</code>, is where the mail receiving server will put your emails at. In a classical mail (receiver) server, each user will have a unique folder, once a user ges a email from somebody on the internet, his/her email will get stored into this folder, here imagine there&rsquo;s a <code>\username</code> folder where all the <code>.eml</code> files will be located at.</li></ul><h2 id=sending-email-with-help-of-dns-system>Sending email with help of DNS system<a hidden class=anchor aria-hidden=true href=#sending-email-with-help-of-dns-system>#</a></h2><p>Email server is distinctive from the DNS system, in order for the email to work, the DNS system must be working. As the DNS system is the one that translates the domain name to the IP address, and the IP address is the one that is used by the email server to send and receive emails.</p><p><strong>Basic use-case of MX records</strong></p><ul><li>Once a email sender server request for the receiver server&rsquo;s address (using a domain name such as <code>gmail.com</code>, <code>outlook.com</code>, usually anything that comes after the <code>@</code> sign), they DNS server will check its <strong>DNS MX records</strong> and return the IP address. (note that alike the usual <code>A</code> and <code>CNAME</code> DNS record, the records will get cached onto your local network infrastructure until it reaches its its end of <code>TTL</code>) The mail sender server will then send the email through using the IP address.</li></ul><p><strong>Multiple MX records</strong></p><ul><li>DNS system also have a unique features that will email server more stable, like how you might setup multiple web server redundancy in case of network failure, you can have multiple mail servers ready for receiving in case of a server failure on one server. This is achieved via having multiple MX records on the DNS server (for instance <code>MX1=111.111.111</code>, <code>MX2=222.222.222</code>, <code>MX3=333.333.333</code> ), if the mail sender fails to send the email to the the MX1 server (it might be busy, or down), the email will get send to the MX2 server (which will only <strong>temporally store</strong> the email and send it to the main MX1 server whenever it become available again; There can only be one server that saves the mails, MX2 only store the email before MX1 comes back)</li></ul><hr><p>Reference:</p><ul><li><a href=http://www.qqgzs.com/archives/email-dns.html>http://www.qqgzs.com/archives/email-dns.html</a></li><li><a href=https://cloud.tencent.com/developer/article/1115106>https://cloud.tencent.com/developer/article/1115106</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.simon-hu.org/tags/dns/>DNS</a></li><li><a href=https://blog.simon-hu.org/tags/mx-record/>MX Record</a></li><li><a href=https://blog.simon-hu.org/tags/mail-server/>Mail Server</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.simon-hu.org/>Simon's Blog</a></span><br><span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>