<!doctype html><html lang=en dir=auto><head><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-WJB975HH")</script><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Drupal Debug Trick: debug_backtrace / debug_print_backtrace | Simon's Blog</title><meta name=keywords content><meta name=description content="PENDING &mldr; ORIGINAL POST ↓ I find this useful as a less memory intensive Drupal-friendly way to backtrace PHP as a one-off code snippet to temporarily drop into a troublesome location without installing modules or server-side tools:
1 2 3 4 5 6 $trace = debug_backtrace(); $backtrace_lite = array(); foreach( $trace as $call ) { $backtrace_lite[] = $call['function'].&#34; &#34;.$call['file'].&#34; line &#34;.$call['line']; } debug( $backtrace_lite, &#34;TRACE&#34;, true ); It gets the backtrace into Drupal&rsquo;s debugging system, but strips it down to the essentials to avoid failures when massive objects are involved."><meta name=author content="Suowei Hu"><link rel=canonical href=https://blog.simon-hu.org/posts/2023.11.16-drupal-debug-bracktrace/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.89e7a3cfb9906f56d1ff70930818833a11ce408c7bcab0b72a35ffe53439a75c.css integrity="sha256-ieejz7mQb1bR/3CTCBiDOhHOQIx7yrC3KjX/5TQ5p1w=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.simon-hu.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.simon-hu.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.simon-hu.org/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.simon-hu.org/apple-touch-icon.png><link rel=mask-icon href=https://blog.simon-hu.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Drupal Debug Trick: debug_backtrace / debug_print_backtrace"><meta property="og:description" content="PENDING &mldr; ORIGINAL POST ↓ I find this useful as a less memory intensive Drupal-friendly way to backtrace PHP as a one-off code snippet to temporarily drop into a troublesome location without installing modules or server-side tools:
1 2 3 4 5 6 $trace = debug_backtrace(); $backtrace_lite = array(); foreach( $trace as $call ) { $backtrace_lite[] = $call['function'].&#34; &#34;.$call['file'].&#34; line &#34;.$call['line']; } debug( $backtrace_lite, &#34;TRACE&#34;, true ); It gets the backtrace into Drupal&rsquo;s debugging system, but strips it down to the essentials to avoid failures when massive objects are involved."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.simon-hu.org/posts/2023.11.16-drupal-debug-bracktrace/"><meta property="og:image" content="https://blog.simon-hu.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-16T00:00:00+00:00"><meta property="article:modified_time" content="2023-11-16T00:00:00+00:00"><meta property="og:site_name" content="Simon's Blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.simon-hu.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Drupal Debug Trick: debug_backtrace / debug_print_backtrace"><meta name=twitter:description content="PENDING &mldr; ORIGINAL POST ↓ I find this useful as a less memory intensive Drupal-friendly way to backtrace PHP as a one-off code snippet to temporarily drop into a troublesome location without installing modules or server-side tools:
1 2 3 4 5 6 $trace = debug_backtrace(); $backtrace_lite = array(); foreach( $trace as $call ) { $backtrace_lite[] = $call['function'].&#34; &#34;.$call['file'].&#34; line &#34;.$call['line']; } debug( $backtrace_lite, &#34;TRACE&#34;, true ); It gets the backtrace into Drupal&rsquo;s debugging system, but strips it down to the essentials to avoid failures when massive objects are involved."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.simon-hu.org/posts/"},{"@type":"ListItem","position":2,"name":"Drupal Debug Trick: debug_backtrace / debug_print_backtrace","item":"https://blog.simon-hu.org/posts/2023.11.16-drupal-debug-bracktrace/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Drupal Debug Trick: debug_backtrace / debug_print_backtrace","name":"Drupal Debug Trick: debug_backtrace \/ debug_print_backtrace","description":"PENDING \u0026hellip; ORIGINAL POST ↓ I find this useful as a less memory intensive Drupal-friendly way to backtrace PHP as a one-off code snippet to temporarily drop into a troublesome location without installing modules or server-side tools:\n1 2 3 4 5 6 $trace = debug_backtrace(); $backtrace_lite = array(); foreach( $trace as $call ) { $backtrace_lite[] = $call[\u0026#39;function\u0026#39;].\u0026#34; \u0026#34;.$call[\u0026#39;file\u0026#39;].\u0026#34; line \u0026#34;.$call[\u0026#39;line\u0026#39;]; } debug( $backtrace_lite, \u0026#34;TRACE\u0026#34;, true ); It gets the backtrace into Drupal\u0026rsquo;s debugging system, but strips it down to the essentials to avoid failures when massive objects are involved.","keywords":[],"articleBody":"PENDING … ORIGINAL POST ↓ I find this useful as a less memory intensive Drupal-friendly way to backtrace PHP as a one-off code snippet to temporarily drop into a troublesome location without installing modules or server-side tools:\n1 2 3 4 5 6 $trace = debug_backtrace(); $backtrace_lite = array(); foreach( $trace as $call ) { $backtrace_lite[] = $call['function'].\" \".$call['file'].\" line \".$call['line']; } debug( $backtrace_lite, \"TRACE\", true ); It gets the backtrace into Drupal’s debugging system, but strips it down to the essentials to avoid failures when massive objects are involved. For handy reference, the other keys within each row of the debug_backtrace() object are: class, object, type, args.\nReference Drupal Answers - 1 Drupal Answers - 2 PHP Documentation - debug_backtrace Example Screenshot ","wordCount":"123","inLanguage":"en","datePublished":"2023-11-16T00:00:00Z","dateModified":"2023-11-16T00:00:00Z","author":{"@type":"Person","name":"Suowei Hu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.simon-hu.org/posts/2023.11.16-drupal-debug-bracktrace/"},"publisher":{"@type":"Organization","name":"Simon's Blog","logo":{"@type":"ImageObject","url":"https://blog.simon-hu.org/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://blog.simon-hu.org/ accesskey=h title="Simon's Blog (Alt + H)">Simon's Blog</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.simon-hu.org/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://blog.simon-hu.org/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://blog.simon-hu.org/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.simon-hu.org/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WJB975HH" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><article class=post-single><header class=post-header><h1 class=post-title>Drupal Debug Trick: debug_backtrace / debug_print_backtrace</h1><div class=post-meta><span title='2023-11-16 00:00:00 +0000 UTC'>Nov 16, 2023</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;123 words&nbsp;·&nbsp;Suowei Hu&nbsp;|&nbsp;<a href=https://github.com/SuoweiHu/SuoweiHu.github.io/content/posts/2023.11.16%20Drupal%20Debug%20Bracktrace/index.md rel="noopener noreferrer" target=_blank>Edit</a></div></header><div class=post-content><h2 id=pending->PENDING &mldr;<a hidden class=anchor aria-hidden=true href=#pending->#</a></h2><h2 id=original-post->ORIGINAL POST ↓<a hidden class=anchor aria-hidden=true href=#original-post->#</a></h2><p>I find this useful as a less memory intensive Drupal-friendly way to backtrace PHP as a one-off code snippet to temporarily drop into a troublesome location without installing modules or server-side tools:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl> <span class=nv>$trace</span> <span class=o>=</span> <span class=nx>debug_backtrace</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=nv>$backtrace_lite</span> <span class=o>=</span> <span class=k>array</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>foreach</span><span class=p>(</span> <span class=nv>$trace</span> <span class=k>as</span> <span class=nv>$call</span> <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$backtrace_lite</span><span class=p>[]</span> <span class=o>=</span> <span class=nv>$call</span><span class=p>[</span><span class=s1>&#39;function&#39;</span><span class=p>]</span><span class=o>.</span><span class=s2>&#34;    &#34;</span><span class=o>.</span><span class=nv>$call</span><span class=p>[</span><span class=s1>&#39;file&#39;</span><span class=p>]</span><span class=o>.</span><span class=s2>&#34;    line &#34;</span><span class=o>.</span><span class=nv>$call</span><span class=p>[</span><span class=s1>&#39;line&#39;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=nx>debug</span><span class=p>(</span> <span class=nv>$backtrace_lite</span><span class=p>,</span> <span class=s2>&#34;TRACE&#34;</span><span class=p>,</span> <span class=k>true</span> <span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>It gets the backtrace into Drupal&rsquo;s debugging system, but strips it down to the essentials to avoid failures when massive objects are involved. For handy reference, the other keys within each row of the debug_backtrace() object are: class, object, type, args.</p><h2 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h2><ul><li><a href=https://drupal.stackexchange.com/questions/195219/how-to-get-a-backtrace-in-drupal-without-problems-like-out-of-memory-when-huge>Drupal Answers - 1</a></li><li><a href=https://drupal.stackexchange.com/questions/239099/how-to-use-dddebug-backtrace-for-an-error-debugging>Drupal Answers - 2</a></li><li><a href=https://www.php.net/manual/en/function.debug-backtrace.php>PHP Documentation - debug_backtrace</a></li></ul><h2 id=example-screenshot>Example Screenshot<a hidden class=anchor aria-hidden=true href=#example-screenshot>#</a></h2><p><img loading=lazy src=2023.11.16%20-%20161209.jpg alt="2023.11.16 - 161209"></p><p><img loading=lazy src=2023.11.16%20-%20161203.jpg alt="2023.11.16 - 161203"></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://blog.simon-hu.org/>Simon's Blog</a></span><br><span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>